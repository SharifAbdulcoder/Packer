{
  "variables": {
    "wordress_version": "",
    "instance_type": ""
  },
  "builders": [{
    "type": "amazon-ebs",
    "region": "us-east-1",
    "source_ami": "ami-0de53d8956e8dcf80",
    "instance_type": "{{instance_type}}",
    "ssh_username": "ec2-user",
    "ami_name": "wordress-{{timestamp}}"
   }],
   "provisioners": [
      {
      "type": "shell",
      "inline": [
        "sudo yum update -y",
        "sudo yum install php php-mysql httpd -y",
        "sudo yum install mysql wget unzip zip -y",
        "wget https://wordpress.org/{{wordpress_version}}.zip",
        "sudo unzip {{wordpress_version}}.zip",
        "sudo rsync -avP ~/wordpress/* /var/www/html/",
        "sudo chown -R apache:apache /var/www/html",
        "sudo systemctl enable httpd" ]
      },
      {
        "type": "file",
        "source": "test_file",
        "destination": "/tmp/test_file"
      }
  ]
}
